<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>pvsneslib: interrupts.h File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="docs.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">pvsneslib
   &#160;<span id="projectnumber">0.3.0</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.8.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a>      </li>
      <li class="navelem"><a class="el" href="dir_1fce5620edc95505dc9b3bb80528afca.html">snes</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">interrupts.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>snes interrupt support.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="a00022.html">snes/snestypes.h</a>&gt;</code><br/>
</div><table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr class="memitem:a88d83a889f8e1d016cedfbd0476db989"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a88d83a889f8e1d016cedfbd0476db989"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00018.html#a88d83a889f8e1d016cedfbd0476db989">HBL_READY</a>&#160;&#160;&#160;(1&lt;&lt;6)</td></tr>
<tr class="memdesc:a88d83a889f8e1d016cedfbd0476db989"><td class="mdescLeft">&#160;</td><td class="mdescRight">H-Blank Period Flag (0=No, 1=HBlank) <br/></td></tr>
<tr class="memitem:ac352c6a25f2e170d7b2bf2236bd31427"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac352c6a25f2e170d7b2bf2236bd31427"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00018.html#ac352c6a25f2e170d7b2bf2236bd31427">INT_HVIRQ_H</a>&#160;&#160;&#160;(1&lt;&lt;4)</td></tr>
<tr class="memdesc:ac352c6a25f2e170d7b2bf2236bd31427"><td class="mdescLeft">&#160;</td><td class="mdescRight">H/V IRQ (0=Disable, 1=At H=H + V=Any, 2=At V=V + H=0, 3=At H=H + V=V) <br/></td></tr>
<tr class="memitem:a062bd6ffa662638df005a03cd2c0a3fb"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a062bd6ffa662638df005a03cd2c0a3fb"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00018.html#a062bd6ffa662638df005a03cd2c0a3fb">INT_HVIRQ_HV</a>&#160;&#160;&#160;(2 &lt;&lt;4)</td></tr>
<tr class="memdesc:a062bd6ffa662638df005a03cd2c0a3fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">H/V IRQ (0=Disable, 1=At H=H + V=Any, 2=At V=V + H=0, 3=At H=H + V=V) <br/></td></tr>
<tr class="memitem:a54b588e60e5abfeaf59ba4c8fd826cfa"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a54b588e60e5abfeaf59ba4c8fd826cfa"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00018.html#a54b588e60e5abfeaf59ba4c8fd826cfa">INT_HVIRQ_V</a>&#160;&#160;&#160;(1&lt;&lt;5)</td></tr>
<tr class="memdesc:a54b588e60e5abfeaf59ba4c8fd826cfa"><td class="mdescLeft">&#160;</td><td class="mdescRight">H/V IRQ (0=Disable, 1=At H=H + V=Any, 2=At V=V + H=0, 3=At H=H + V=V) <br/></td></tr>
<tr class="memitem:ab4a66ed24f182a8d056f7db1cab6eb82"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab4a66ed24f182a8d056f7db1cab6eb82"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00018.html#ab4a66ed24f182a8d056f7db1cab6eb82">INT_JOYPAD_ENABLE</a>&#160;&#160;&#160;(1)</td></tr>
<tr class="memdesc:ab4a66ed24f182a8d056f7db1cab6eb82"><td class="mdescLeft">&#160;</td><td class="mdescRight">Joypad Enable (0=Disable, 1=Enable Automatic Reading of Joypad) <br/></td></tr>
<tr class="memitem:a435380b6460ebd669f2b344ea79316d6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00018.html#a435380b6460ebd669f2b344ea79316d6">INT_VBLENABLE</a>&#160;&#160;&#160;(1&lt;&lt;7)</td></tr>
<tr class="memdesc:a435380b6460ebd669f2b344ea79316d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bit defines for the interrupt registers.  <a href="#a435380b6460ebd669f2b344ea79316d6"></a><br/></td></tr>
<tr class="memitem:a2094086b43aa835d241e35153f8ed1bc"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2094086b43aa835d241e35153f8ed1bc"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00018.html#a2094086b43aa835d241e35153f8ed1bc">PAD_BUSY</a>&#160;&#160;&#160;(1)</td></tr>
<tr class="memdesc:a2094086b43aa835d241e35153f8ed1bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Auto-Joypad-Read Busy Flag (1=Busy) (see 4200h, and 4218h..421Fh) <br/></td></tr>
<tr class="memitem:af25c0fcc5e2519aa98aebe289d391ca2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af25c0fcc5e2519aa98aebe289d391ca2"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00018.html#af25c0fcc5e2519aa98aebe289d391ca2">REG_HVBJOY</a>&#160;&#160;&#160;(*(vuint8*)0x4212)</td></tr>
<tr class="memdesc:af25c0fcc5e2519aa98aebe289d391ca2"><td class="mdescLeft">&#160;</td><td class="mdescRight">H/V-Blank flag and Joypad Busy flag (R). 7 V-Blank Period Flag (0=No, 1=VBlank) 6 H-Blank Period Flag (0=No, 1=HBlank) 5-1 Not used 0 Auto-Joypad-Read Busy Flag (1=Busy) (see 4200h, and 4218h..421Fh) The Hblank flag gets toggled in ALL scanlines (including during Vblank/Vsync). Both Vblank and Hblank are always toggling (even during Forced Blank, and no matter if IRQs or NMIs are enabled. <br/></td></tr>
<tr class="memitem:a8627bb48b8760c306190eb7ed050af73"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00018.html#a8627bb48b8760c306190eb7ed050af73">REG_NMITIMEN</a>&#160;&#160;&#160;(*(vuint8*)0x4200)</td></tr>
<tr class="memdesc:a8627bb48b8760c306190eb7ed050af73"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interrupt Enable and Joypad Request (W). 7 VBlank NMI Enable (0=Disable, 1=Enable) (Initially disabled on reset) 6 Not used 5-4 H/V IRQ (0=Disable, 1=At H=H + V=Any, 2=At V=V + H=0, 3=At H=H + V=V) 3-1 Not used 0 Joypad Enable (0=Disable, 1=Enable Automatic Reading of Joypad)  <a href="#a8627bb48b8760c306190eb7ed050af73"></a><br/></td></tr>
<tr class="memitem:a3a29932a3a9cf7dbbf25a3a30c9e25fa"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3a29932a3a9cf7dbbf25a3a30c9e25fa"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00018.html#a3a29932a3a9cf7dbbf25a3a30c9e25fa">REG_RDNMI</a>&#160;&#160;&#160;(*(vuint8*)0x4210)</td></tr>
<tr class="memdesc:a3a29932a3a9cf7dbbf25a3a30c9e25fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">V-Blank NMI Flag and CPU Version Number (R) (Read/Ack) 7 Vblank NMI Flag (0=None, 1=Interrupt Request) (set on Begin of Vblank) 6-4 Not used 3-0 CPU 5A22 Version Number (version 2 exists) The NMI flag gets set at begin of Vblank (this happens even if NMIs are disabled). The flag gets reset automatically at end of Vblank, and gets also reset after reading from this register. The SNES has only one NMI source (vblank), and the NMI flag is automatically reset (on vblank end), so there's normally no need to read/acknowledge the flag, except one special case: If one does disable and re-enable NMIs, then an old NMI may be executed again; acknowledging avoids that effect. The CPU includes another internal NMI flag, which gets set when "[4200h].7 AND [4210h].7" changes from 0-to-1, and gets cleared when the NMI gets executed (which should happen around after the next opcode) (if a DMA transfer is in progress, then it is somewhere after the DMA, in that case the NMI can get executed outside of the Vblank period, ie. at a time when [4210h].7 is no longer set). <br/></td></tr>
<tr class="memitem:a1982e080d74da9e146881ca580ffec0d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1982e080d74da9e146881ca580ffec0d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00018.html#a1982e080d74da9e146881ca580ffec0d">VBL_READY</a>&#160;&#160;&#160;(1&lt;&lt;7)</td></tr>
<tr class="memdesc:a1982e080d74da9e146881ca580ffec0d"><td class="mdescLeft">&#160;</td><td class="mdescRight">V-Blank Period Flag (0=No, 1=VBlank) <br/></td></tr>
<tr class="memitem:a03304aaf535795c2857e357e028cdebe"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a03304aaf535795c2857e357e028cdebe"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00018.html#a03304aaf535795c2857e357e028cdebe">WaitVBLFlag</a></td></tr>
<tr class="memdesc:a03304aaf535795c2857e357e028cdebe"><td class="mdescLeft">&#160;</td><td class="mdescRight">macro to wait the VBL flag OK <br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a64d4258f3ba782ce6db9f940fc88cc21"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00018.html#a64d4258f3ba782ce6db9f940fc88cc21">nmiSet</a> (<a class="el" href="a00022.html#a096a3288a1ef62f076029613b8b67b0b">VoidFn</a> handler)</td></tr>
<tr class="memdesc:a64d4258f3ba782ce6db9f940fc88cc21"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a handler for the given interrupt mask. Specify the handler to use for the nmi interrupt.  <a href="#a64d4258f3ba782ce6db9f940fc88cc21"></a><br/></td></tr>
<tr class="memitem:a815e2626bd26d0e936d507a363ecd723"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a815e2626bd26d0e936d507a363ecd723"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00018.html#a815e2626bd26d0e936d507a363ecd723">WaitForVBlank</a> (void)</td></tr>
<tr class="memdesc:a815e2626bd26d0e936d507a363ecd723"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for vblank interrupt Waits for a vertical blank interrupt. <br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>snes interrupt support. </p>
</div><hr/><h2>Define Documentation</h2>
<a class="anchor" id="a435380b6460ebd669f2b344ea79316d6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="a00018.html#a435380b6460ebd669f2b344ea79316d6">INT_VBLENABLE</a>&#160;&#160;&#160;(1&lt;&lt;7)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Bit defines for the interrupt registers. </p>
<p>VBlank NMI Enable (0=Disable, 1=Enable) (Initially disabled on reset) </p>

</div>
</div>
<a class="anchor" id="a8627bb48b8760c306190eb7ed050af73"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="a00018.html#a8627bb48b8760c306190eb7ed050af73">REG_NMITIMEN</a>&#160;&#160;&#160;(*(vuint8*)0x4200)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Interrupt Enable and Joypad Request (W). 7 VBlank NMI Enable (0=Disable, 1=Enable) (Initially disabled on reset) 6 Not used 5-4 H/V IRQ (0=Disable, 1=At H=H + V=Any, 2=At V=V + H=0, 3=At H=H + V=V) 3-1 Not used 0 Joypad Enable (0=Disable, 1=Enable Automatic Reading of Joypad) </p>
<p>Disabling IRQs (via bit4-5) does additionally acknowledge IRQs. There's no such effect when disabling NMIs (via bit7). </p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a64d4258f3ba782ce6db9f940fc88cc21"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00018.html#a64d4258f3ba782ce6db9f940fc88cc21">nmiSet</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00022.html#a096a3288a1ef62f076029613b8b67b0b">VoidFn</a>&#160;</td>
          <td class="paramname"><em>handler</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Add a handler for the given interrupt mask. Specify the handler to use for the nmi interrupt. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">handler</td><td>Address of the function to use as an interrupt service routine </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Sun May 20 2012 08:58:18 for pvsneslib by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.0
</small></address>

</body>
</html>
